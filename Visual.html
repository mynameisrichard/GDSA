<!DOCTYPE html>

 <head>
  <link rel="stylesheet" type="text/css" href="sfamaptheme.css">
  <script src="https://d3js.org/d3.v4.js"></script>
</head> 

<script>

//grab tube map and add all nodes to body
d3.xml("TubeMap.svg").mimeType("image/svg+xml").get(function(error, xml) {

  	if (error) throw error;
  	d3.select("#mapCanvas").node().appendChild(xml.documentElement);

  	//load test data from csv and draw a couple of circles
  	d3.csv("cities.csv",function(data) {
  
		//turn strings to numbers - forEach calls a function for each element in an array (in this case our array is data)
		data.forEach(function(d){
			d.score = +d.score;
		});
  
            //g wrapper for hotspots
            var hotSpots = d3.select("#main_map").append('g').attr("id","hotSpots;")
            
            //try dynamic update with data
            hotSpots.selectAll("circle")
                        .data(data)
                        .enter().append("circle")
                        .attr("cx",function(d,i) { return (i)*150; })
                        .attr("cy",function(d,i) { return (i)*150; })
                        .attr("r",function(d) { return (d.score); })
                        .attr("fill","red")
                        .attr("fill-opacity",".4");

	});
	
});

</script>

<body>

	<div id="titleBar">
		<h1>My SFA visual title</h1>
		<p> And the sub-title as well
	</div>

	<div id="mapCanvas"></div>

</body>

</html>
